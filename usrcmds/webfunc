# Open website with chromium in background and no shell output
chromium() {
  ( chromium-browser "$1" & ) > /dev/null 2>&1 
  # redirects stdout to /dev/null and stderr to stdout
}
alias chr=chromium

# Google
google() {
    chromium https://google.com
}
# Google Drive
gdrive() {
    chromium https://drive.google.com/drive/my-drive
}
# GMail
mail() {
    chromium https://mail.google.com
}

# WEBSCRIPTS ALIASES
alias muesli.sh=~/.bash_usrconf/usrcmds/scripts/muesli.sh
alias download.sh=~/.bash_usrconf/usrcmds/scripts/download.sh

# Datenbanken
dbpath=~/Schreibtisch/Datenbanken
dburl="https://elearning2.uni-heidelberg.de/course/view.php?id=17281"
db() {
  OPTIND=1
  while getopts ":cm-:" opt
  do
     case "$opt" in
        "-")  # check for long parameters
          case "$OPTARG" in
            chromium)
              chromium "$dburl";;
            muesli)
              muesli.sh "https://muesli.mathi.uni-heidelberg.de/lecture/view_points/846" "$dbpath/DBmuesli";;
            *)
              echo "db: Ungültige Option -- $OPTARG";;
          esac;;
        c) chromium "$dburl";;
        m) muesli.sh "https://muesli.mathi.uni-heidelberg.de/lecture/view_points/846" "$dbpath/DBmuesli";;
        *) echo "db: Ungültige Option -- $OPTARG";;
     esac
  done
  if [[ -d "$dbpath" ]]; then
    cd "$dbpath"
  fi
}

# Numerik
numpath=~/Schreibtisch/Numerik
numurl="https://conan.iwr.uni-heidelberg.de/teaching/numerik0_ss2018/"
num() {
  __download() {
    outdir="$numpath/Übungsblätter"
    if [[ ! -d "$outdir" ]]; then
      mkdir -p "$outdir"
    fi
    cd "$outdir"
    dlurl=$(echo $numurl | sed "s/heidelberg.de\//&data\//g")
    download.sh "$dlurl"uebung{0{1..9},{10..13}}.pdf
  }
  OPTIND=1
  while getopts ":cdm-:" opt
  do
    case "$opt" in
      "-")  # check for long parameters
        case "$OPTARG" in
          chromium) chromium "$numurl";;
          download) __download;;
          muesli) muesli.sh "https://muesli.mathi.uni-heidelberg.de/lecture/view_points/867" "$numpath/NUMmuesli";;
          *) echo "num: Ungültige Option -- $OPTARG";;
        esac;;
      c) chromium "$numurl";;
      d) __download;;
      m) muesli.sh "https://muesli.mathi.uni-heidelberg.de/lecture/view_points/867" "$numpath/NUMmuesli";;
      *) echo "num: Ungültige Option -- $OPTARG";;
    esac
  done
  if [[ -d "$numpath" ]]; then
    cd "$numpath"
  fi
  unset -f __download
}

# Theoretische Informatik
theopath=~/Schreibtisch/Theoretische\ Informatik
theourl="http://www.math.uni-heidelberg.de/logic/ss18/theoinf_ss18.html"
theo() {
  __download() {
    dlurl=${theourl:0:$((${#theourl}-10))}
    exerdir="$theopath/Übungsblätter"
    if [[ ! -d "$exerdir" ]]; then
      mkdir -p "$exerdir"
    fi
    cd "$exerdir"
    download.sh "$dlurl/"SS18_Blatt_{1..13}.pdf
    vldir="$theopath/Folien"
    if [[ ! -d "$vldir" ]]; then
      mkdir -p "$vldir"
    fi
    cd "$vldir"
    download.sh "$dlurl/"2018-TI-Folien%20{0{0..9},{10..15}}-DV.pdf
  }
  OPTIND=1
  while getopts ":cdm-:" opt
  do
     case "$opt" in
        "-")  # check for long parameters
          case "$OPTARG" in
            chromium) chromium "$theourl";;
            download) __download;;
            muesli) muesli.sh "https://muesli.mathi.uni-heidelberg.de/lecture/view_points/847" "$theopath/TImuesli";;
            *) echo "theo: Ungültige Option -- $OPTARG";;
          esac;;
        c) chromium "$theourl";;
        d) __download;;
        m) muesli.sh "https://muesli.mathi.uni-heidelberg.de/lecture/view_points/847" "$theopath/TImuesli";;
        *) echo "theo: Ungültige Option -- $OPTARG";;
     esac
  done
  if [[ -d "$theopath" ]]; then
    cd "$theopath"
  fi
  unset -f __download
}

# Müsli
müsli() {
  chromium https://muesli.mathi.uni-heidelberg.de/user/login
}

# Ricoh
ricoh() {
  chromium https://ricoh-eop.urz.uni-heidelberg.de/login.cfm?dest=index.cfm
}

# Discord
discord() {
  chromium https://discordapp.com/channels/@me
}
